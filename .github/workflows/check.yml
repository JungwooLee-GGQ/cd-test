name: python cicd
on:
  push:
    branches:
      - develop

jobs:
  deployment:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        include:
          - server: "121.133.17.77"
            user : "admin"
            pwd : "qwer123"
            port : "22"
        
    steps:
      - name: connect and go cd
        continue-on-error: true
        #uses: JungwooLee-GGQ/github-action-ssh@feature-command
        uses: appleboy/ssh-action@v0.1.7
        #uses: garygrossgarten/github-action-ssh@release
        id: ssh
        with:
          host: ${{ matrix.server }}
          username: ${{ matrix.user }}
          password: ${{ secrets.KEY}}
          port: ${{ matrix.PORT }}
          script: |
            cd Documents\\GitHub\\cd-test
            git stash
            git checkout develop
            
      - name: Execute directly with alias provide in first action
        uses: mnival/ssh-remote-commands-action@v0.0.1
        with:
          ssh_host_alias: ${{ steps.ssh.outputs.ssh_host_alias }}
          ssh_commands: echo "Test integration"
